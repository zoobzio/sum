---
title: rocco Integration
description: HTTP server integration with OpenAPI support
author: zoobzio
published: 2026-01-26
updated: 2026-01-26
tags:
  - integration
  - http
  - rocco
  - openapi
---

# rocco Integration

[rocco](https://github.com/zoobzio/rocco) is an HTTP engine with built-in OpenAPI generation. Sum wraps rocco to provide the application's HTTP layer.

## What rocco Provides

- HTTP server with graceful shutdown
- Endpoint registration with type-safe handlers
- Automatic OpenAPI specification generation
- Tag-based endpoint organization

## The Integration

Sum's `Service` embeds a rocco engine:

```go
svc := sum.New(sum.ServiceConfig{Host: "localhost", Port: 8080})
```

This creates a rocco engine configured with the specified host and port.

## Registering Endpoints

Use `Handle()` to register rocco endpoints:

```go
svc := sum.New(cfg)

svc.Handle(
    rocco.GET("/users", listUsers),
    rocco.GET("/users/{id}", getUser),
    rocco.POST("/users", createUser),
)
```

Endpoints are rocco types—see [rocco documentation](https://pkg.go.dev/github.com/zoobzio/rocco) for handler signatures and middleware.

## OpenAPI Tags

Organize endpoints with tags:

```go
svc.Tag("users", "User management operations")
svc.Tag("orders", "Order processing endpoints")
```

Tags appear in the generated OpenAPI specification.

## Accessing the Engine

For advanced rocco features, access the engine directly:

```go
engine := svc.Engine()

// Configure middleware
engine.WithMiddleware(loggingMiddleware)

// Access OpenAPI spec
spec := engine.OpenAPI()
```

## Lifecycle

The engine starts when you call `Run()` or `Start()`:

```go
// Blocking with signal handling
svc.Run()

// Or manual control
go svc.Start()
// ... later ...
svc.Shutdown(ctx)
```

`Run()` handles SIGINT/SIGTERM and performs graceful shutdown automatically.

## Example

Complete example with sum and rocco:

```go
package main

import (
    "context"
    "log"

    "github.com/zoobzio/rocco"
    "github.com/zoobzio/sum"
)

func main() {
    svc := sum.New(sum.ServiceConfig{Host: "0.0.0.0", Port: 8080})
    k := sum.Start()

    // Register services
    sum.Register[UserService](k, &userSvcImpl{})
    sum.Freeze(k)

    // Register endpoints
    svc.Tag("users", "User operations")
    svc.Handle(
        rocco.GET("/users", listUsersHandler),
        rocco.POST("/users", createUserHandler),
    )

    log.Println("Starting server on :8080")
    if err := svc.Run(); err != nil {
        log.Fatal(err)
    }
}

func listUsersHandler(ctx context.Context) ([]User, error) {
    userSvc := sum.MustUse[UserService](ctx)
    return userSvc.List(ctx)
}
```

## Next Steps

- [grub Integration](2.grub.md) — Database and storage
- [rocco Documentation](https://pkg.go.dev/github.com/zoobzio/rocco)

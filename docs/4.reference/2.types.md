---
title: Types Reference
description: Type definitions and structures in sum
author: zoobzio
published: 2026-01-26
updated: 2026-01-26
tags:
  - reference
  - types
  - structs
---

# Types Reference

Complete documentation for all public types in sum.

## Service

```go
type Service struct {
    // contains filtered or unexported fields
}
```

Service wraps a rocco engine and scio catalog, providing application lifecycle management.

### Methods

| Method | Signature | Description |
|--------|-----------|-------------|
| `Handle` | `(endpoints ...rocco.Endpoint)` | Registers HTTP endpoints |
| `Tag` | `(name, description string)` | Registers an OpenAPI tag |
| `Engine` | `() *rocco.Engine` | Returns the underlying HTTP engine |
| `Catalog` | `() *scio.Scio` | Returns the data catalog |
| `Config` | `() ServiceConfig` | Returns the service configuration |
| `Start` | `() error` | Begins serving (blocks) |
| `Shutdown` | `(ctx context.Context) error` | Gracefully stops the service |
| `Run` | `() error` | Starts and handles shutdown signals |

### Usage

```go
svc := sum.New(sum.ServiceConfig{Host: "localhost", Port: 8080})
svc.Handle(rocco.GET("/health", healthHandler))
svc.Run()
```

---

## ServiceConfig

```go
type ServiceConfig struct {
    Host string
    Port int
}
```

ServiceConfig defines the service configuration.

| Field | Type | Description |
|-------|------|-------------|
| `Host` | `string` | The host to bind to |
| `Port` | `int` | The port to listen on |

---

## Event

```go
type Event[T any] struct {
    Signal capitan.Signal
    Key    capitan.GenericKey[T]
    // contains filtered or unexported fields
}
```

Event provides bidirectional access to a signal with typed data.

| Field | Type | Description |
|-------|------|-------------|
| `Signal` | `capitan.Signal` | The underlying signal name |
| `Key` | `capitan.GenericKey[T]` | The typed key for payload extraction |

### Methods

| Method | Signature | Description |
|--------|-----------|-------------|
| `Emit` | `(ctx context.Context, data T)` | Dispatches an event |
| `Listen` | `(callback func(context.Context, T)) *capitan.Listener` | Registers a callback |
| `ListenOnce` | `(callback func(context.Context, T)) *capitan.Listener` | Registers a one-time callback |

### Usage

```go
var UserCreated = sum.NewInfoEvent[User](capitan.Signal("user.created"))

// Emit
UserCreated.Emit(ctx, user)

// Listen
listener := UserCreated.Listen(func(ctx context.Context, u User) {
    log.Printf("User: %s", u.ID)
})
defer listener.Close()
```

---

## Re-exported Types

These types are re-exported from slush for convenience:

### Guard

```go
type Guard = slush.Guard
// func(ctx context.Context) error
```

A validation function that permits or denies service access.

**Returns:** `nil` to permit, error to deny.

---

### Handle

```go
type Handle[T any] = slush.Handle[T]
```

Configures a registered service with optional guards.

| Method | Signature | Description |
|--------|-----------|-------------|
| `Guard` | `(guards ...Guard) *Handle[T]` | Attaches guards to the service |

**Usage:**

```go
sum.Register[AdminService](k, impl).
    Guard(requireRole("admin")).
    Guard(requireTenant)
```

---

### ServiceInfo

```go
type ServiceInfo = slush.ServiceInfo
```

Describes a registered service for enumeration.

| Field | Type | Description |
|-------|------|-------------|
| `Interface` | `string` | The contract type name |
| `Impl` | `string` | The implementation type name |

---

### Key

```go
type Key = slush.Key
```

Grants the capability to register services. Obtained from `Start()`.

---

## Errors

```go
var (
    ErrNotFound     = slush.ErrNotFound
    ErrAccessDenied = slush.ErrAccessDenied
    ErrInvalidKey   = slush.ErrInvalidKey
)
```

| Error | When |
|-------|------|
| `ErrNotFound` | `Use[T]()` called for unregistered type |
| `ErrAccessDenied` | A guard denied access |
| `ErrInvalidKey` | Invalid key passed to `Services()` |

---

## Signals

```go
var (
    SignalRegistered capitan.Signal = slush.SignalRegistered
    SignalAccessed   capitan.Signal = slush.SignalAccessed
    SignalDenied     capitan.Signal = slush.SignalDenied
    SignalNotFound   capitan.Signal = slush.SignalNotFound
)
```

| Signal | When |
|--------|------|
| `SignalRegistered` | Service registered |
| `SignalAccessed` | Service retrieved successfully |
| `SignalDenied` | Guard denied access |
| `SignalNotFound` | Service not found |

---

## Field Keys

```go
var (
    KeyInterface capitan.Key = slush.KeyInterface
    KeyImpl      capitan.Key = slush.KeyImpl
    KeyError     capitan.Key = slush.KeyError
)
```

Keys for extracting data from registry signals:

| Key | Type | Description |
|-----|------|-------------|
| `KeyInterface` | `string` | The contract type name |
| `KeyImpl` | `string` | The implementation type name |
| `KeyError` | `error` | The error (for denied/not found) |

---

## grub Types

These types are used with data helpers but come from grub:

| Type | Description |
|------|-------------|
| `grub.Database[M]` | SQL database wrapper |
| `grub.Store[M]` | Key-value store wrapper |
| `grub.Bucket[M]` | Object storage wrapper |
| `grub.StoreProvider` | KV backend provider |
| `grub.BucketProvider` | Object storage backend provider |

See [grub documentation](https://pkg.go.dev/github.com/zoobzio/grub) for details.

---

## Next Steps

- [API Reference](1.api.md) — Function documentation
- [Concepts](../1.learn/3.concepts.md) — Mental models
